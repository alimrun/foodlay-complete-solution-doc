<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Foodlay Admin &amp; Web Documentation</title>
    <link rel="stylesheet" href="../assets/css/docs.css">
</head>

<body>
    <header class="navbar">
        <div class="nav-inner container">
            <a class="brand" href="../../index.html">
                <div class="logo"></div>
                <div class="title">Foodlay</div>
            </a>
            <nav class="nav-links">
                <a href="../../index.html">Home</a>
                <a href="./admin-and-web.html">Admin &amp; Web</a>
                <a href="./customer-app.html">Customer App</a>
                <a href="./deliveryman-app.html">Deliveryman App</a>
            </nav>
            <div class="nav-actions">
                <button class="btn" id="menu-toggle">Menu</button>
                <button class="btn" id="theme-toggle"><span id="theme-icon">ðŸŒ™</span> Theme</button>
            </div>
        </div>
    </header>

    <main class="container layout">
        <aside class="sidebar">
            <div class="search">
                <input type="text" id="search" placeholder="Search headings">
                <span class="kbd">/</span>
            </div>
            <h4>Contents</h4>
            <nav class="toc" id="toc">
                <a href="#introduction">Introduction</a>
                <a href="#system-features">System Features</a>
                <a href="#prerequisites">Prerequisites</a>
                <a href="#quick-start">Quick Start Guide</a>
                <a href="#installation-process">Installation Process</a>
                <a href="#basic-configuration">Basic Configuration</a>
                <a href="#server-configuration">Server Configuration</a>
                <a href="#deployment">Deployment</a>
                <a href="#troubleshooting">Troubleshooting</a>
                <a href="#customization">Customization</a>
            </nav>
        </aside>

        <section class="content">
            <h2 id="introduction">Introduction</h2>
            <div class="section">
                <p><strong>Foodlay</strong> is a modern single-vendor restaurant management system built on top of the
                    foodlay stack, combining a robust <strong>Laravel 12</strong> backend with a dynamic <strong>Vue
                        3</strong> frontend via <strong>Inertia.js</strong>.</p>
                <ul class="list">
                    <li>Backend: Laravel 12</li>
                    <li>Frontend: Vue 3 (Composition API) with Inertia.js</li>
                    <li>Styling: Tailwind CSS 4</li>
                    <li>Build tool: Vite 7</li>
                    <li>Database: MySQL 8+/MariaDB 10.5+</li>
                </ul>
                <h3>System Architecture</h3>
                <ul class="list">
                    <li>Monolithic Laravel application with two decoupled frontend modules:</li>
                    <li>Admin Panel: dashboard for managing orders, items, users, and settings</li>
                    <li>Storefront: customer-facing web app for browsing menus and placing orders</li>
                </ul>
                <h3>Folder Structure</h3>
                <pre class="code">/app
/Http
  /Controllers
    /Api          (REST API V1)
    /Payment      (Gateways: Stripe, PayPal, etc.)
    /Web          (Inertia controllers: Admin, StoreFront)
  /Middleware
  /Requests
  /Resources
/config
/database
/public          (POINT DOMAIN HERE)
/resources
  /js
    /AdminPanel   (Admin Vue app)
    /StoreFront   (Customer Vue app)
    /components   (Shared UI)
    /lib          (Utilities)
  /css            (Tailwind entries)
  /views          (Blade entry points)
/routes
  /api            (Versioned API routes)
  /web            (Admin, Storefront, Installer)
/storage
.env</pre>
            </div>

            <h2 id="system-features">System Features</h2>
            <div class="section">
                <h3>Dashboard &amp; Analytics</h3>
                <ul class="list">
                    <li>Real-time overview of orders, revenue, and active users</li>
                    <li>Reports: sales &amp; revenue, category &amp; item performance, user activity, hourly trends</li>
                </ul>
                <h3>Order Management</h3>
                <ul class="list">
                    <li>Full lifecycle tracking: Pending, Confirm, Processing, Handover, Picked Up, Delivered</li>
                    <li>Delivery assignment (manual/automatic), invoice generation, refund workflows</li>
                </ul>
                <h3>Food &amp; Menu Management</h3>
                <ul class="list">
                    <li>Advanced item setup (description, images, pricing)</li>
                    <li>Variations &amp; addons; categories &amp; sub-categories; labels &amp; cuisines</li>
                    <li>Bulk import/export via CSV/Excel</li>
                </ul>
                <h3>Marketing &amp; Promotions</h3>
                <ul class="list">
                    <li>Coupons with limits/expiry; BOGO; Happy Hour scheduling</li>
                    <li>Loyalty points redeemable to wallet; push notifications via Firebase</li>
                    <li>Sales popups for FOMO on storefront</li>
                </ul>
                <h3>User Management</h3>
                <ul class="list">
                    <li>Employee roles &amp; granular permissions</li>
                    <li>Deliveryman management with shift tracking and earnings</li>
                    <li>Customer wallet and CRM (orders, points, balance)</li>
                </ul>
                <h3>Website &amp; Content</h3>
                <ul class="list">
                    <li>Page builder for About/Privacy/Terms</li>
                    <li>Blogs and FAQ modules</li>
                    <li>Social links configuration</li>
                </ul>
                <h3>Settings &amp; Configuration</h3>
                <ul class="list">
                    <li>Payment gateways: Stripe, PayPal, Razorpay, Flutterwave</li>
                    <li>SMS gateways: Twilio, Nexmo</li>
                    <li>Firebase setup for notifications/auth; Mail via SMTP (Gmail, SES, Mailgun)</li>
                    <li>Business info: currency, time zone, logo, branding</li>
                </ul>
                <h3>Communication</h3>
                <ul class="list">
                    <li>Live chat between customers and Admin/Support</li>
                    <li>Order-specific support channels</li>
                </ul>
                <h3>System Maintenance</h3>
                <ul class="list">
                    <li>Database backups, system health view (PHP version, extensions)</li>
                    <li>Activity logs for auditing</li>
                </ul>
                <h3>Security</h3>
                <ul class="list">
                    <li>Role-based access control</li>
                    <li>Secure login protections</li>
                </ul>
            </div>

            <h2 id="prerequisites">Prerequisites</h2>
            <div class="section">
                <h3>Server Requirements</h3>
                <ul class="list">
                    <li>PHP â‰¥ 8.2</li>
                    <li>Composer â‰¥ 2.5</li>
                    <li>Node.js â‰¥ 18.x</li>
                    <li>MySQL 8.0+ or MariaDB 10.5+</li>
                </ul>
                <h3>PHP Extensions</h3>
                <pre class="code">BCMath
Ctype
Fileinfo
JSON
Mbstring
OpenSSL
PDO (pdo_mysql)
Tokenizer
XML
curl
gd
exif
intl
zip</pre>
                <img src="../assets/images/upload/requirements.png" alt="Server requirements check" class="doc-img">
            </div>

            <h2 id="quick-start">Quick Start Guide</h2>
            <div class="section">
                <h3>Pre-flight Checklist</h3>
                <ul class="list">
                    <li>Domain and hosting meeting prerequisites.</li>
                    <li>Purchase code available.</li>
                    <li>Empty MySQL/MariaDB database created.</li>
                </ul>
                <h3>4-Step Installation</h3>
                <ul class="list">
                    <li>Upload and unzip install.zip.</li>
                    <li>Point domain document root to /public.</li>
                    <li>Run installer wizard in browser.</li>
                    <li>Configure DB credentials and purchase code.</li>
                </ul>
                <h3>Post-Installation</h3>
                <ul class="list">
                    <li>Configure business settings.</li>
                    <li>Set up mail (SMTP).</li>
                    <li>Configure cron job.</li>
                    <li>Create zone and add first food item.</li>
                </ul>
                <img src="../assets/images/upload/business-setup.png" alt="Business setup screen" class="doc-img">
            </div>

            <h2 id="installation-process">Installation Process</h2>
            <div class="section">
                <h3>Database Creation</h3>
                <ul class="list">
                    <li>Step A: Create database via cPanel wizard.</li>
                    <li>Step B: Create DB user and password.</li>
                    <li>Step C: Assign ALL PRIVILEGES to the user.</li>
                </ul>
                <img src="../assets/images/upload/database-setup.png" alt="Database setup wizard" class="doc-img">
                <h3>Extraction &amp; Setup</h3>
                <ul class="list">
                    <li>Upload and unzip install.zip to server root.</li>
                    <li>Point domain/subdomain to /public.</li>
                    <li>Ensure writable: /storage, /bootstrap/cache, .env.</li>
                </ul>
                <h3>Automated Wizard</h3>
                <ul class="list">
                    <li>Visit site to start installer.</li>
                    <li>Enter DB credentials and purchase code.</li>
                    <li>Finish and log in to Admin Panel.</li>
                </ul>
                <img src="../assets/images/upload/purchase-verification.png" alt="Purchase verification"
                    class="doc-img">
                <img src="../assets/images/upload/finalize installation.png" alt="Finalize installation"
                    class="doc-img">
                <img src="../assets/images/upload/installation-success.png" alt="Installation success" class="doc-img">
            </div>

            <h2 id="basic-configuration">Basic Configuration</h2>
            <div class="section">
                <h3>Core</h3>
                <ul class="list">
                    <li>Business details, currency, time zone, branding.</li>
                    <li>Enable/disable modules as needed.</li>
                </ul>
                <h3>Integrations</h3>
                <ul class="list">
                    <li>Payment gateways: Stripe, PayPal, Razorpay, Flutterwave, etc.</li>
                    <li>SMS gateways: Twilio, Nexmo, others for OTP.</li>
                    <li>Firebase: push notifications and auth.</li>
                    <li>Mail: SMTP (Gmail, AWS SES, Mailgun).</li>
                </ul>
                <h3>Environment</h3>
                <div class="alert alert-warning">.env contains sensitive credentials. Do not commit it. Ensure <span
                        class="mark">APP_URL</span> matches your domain.</div>
                <pre class="code">APP_NAME=
APP_ENV=
APP_KEY=
APP_URL=
DB_HOST=
DB_PORT=
DB_DATABASE=
DB_USERNAME=
DB_PASSWORD=
MAIL_MAILER=
QUEUE_CONNECTION=
BROADCAST_DRIVER=
CACHE_DRIVER=</pre>
            </div>

            <h2 id="server-configuration">Server Configuration</h2>
            <div class="section">
                <h3>Local Development</h3>
                <ul class="list">
                    <li>php artisan serve (local dev only)</li>
                    <li>Access: http://127.0.0.1:8000</li>
                </ul>
                <h3>Production .env Essentials</h3>
                <ul class="list">
                    <li>Disable debug in production and set a correct APP_URL.</li>
                </ul>
                <pre class="code">APP_ENV=production
APP_DEBUG=false
APP_URL=https://example.com
LOG_CHANNEL=stack
CACHE_DRIVER=file
QUEUE_CONNECTION=database
SESSION_DRIVER=file
SESSION_SECURE_COOKIE=true
# If using subdomains:
SESSION_DOMAIN=.example.com
# If behind a proxy/CDN:
TRUSTED_PROXIES=*</pre>
                <h3>Nginx</h3>
                <pre class="code">server {
    listen 80;
    server_name example.com;
    root /var/www/foodlay/public;
    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-Content-Type-Options "nosniff";
    index index.php;
    charset utf-8;
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }
    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
        include fastcgi_params;
    }
}</pre>
                <h3>Nginx (HTTPS + Redirect)</h3>
                <pre class="code">server {
    listen 80;
    server_name example.com www.example.com;
    return 301 https://example.com$request_uri;
}
server {
    listen 443 ssl http2;
    server_name example.com;
    root /var/www/foodlay/public;
    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-Content-Type-Options "nosniff";
    index index.php;
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }
    location ~ \.php$ {
        # Adjust socket or use 127.0.0.1:9000 depending on your PHP-FPM setup
        fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
        include fastcgi_params;
    }
    location ~* \.(?:css|js|jpg|jpeg|gif|png|webp|ico|svg)$ {
        expires 7d;
        add_header Cache-Control "public, max-age=604800, immutable";
    }
}</pre>
                <h3>Apache</h3>
                <pre class="code">&lt;VirtualHost *:80&gt;
    ServerName example.com
    DocumentRoot /var/www/foodlay/public
    &lt;Directory /var/www/foodlay/public&gt;
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Require all granted
    &lt;/Directory&gt;
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;</pre>
                <h3>Apache (HTTPS + Redirect)</h3>
                <pre class="code">&lt;VirtualHost *:80&gt;
  ServerName example.com
  Redirect permanent / https://example.com/
&lt;/VirtualHost&gt;
&lt;IfModule mod_ssl.c&gt;
&lt;VirtualHost *:443&gt;
  ServerName example.com
  DocumentRoot /var/www/foodlay/public
  SSLEngine on
  SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem
  SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem
  &lt;Directory /var/www/foodlay/public&gt;
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Require all granted
  &lt;/Directory&gt;
&lt;/VirtualHost&gt;
&lt;/IfModule&gt;</pre>
                <h3>LiteSpeed / OpenLiteSpeed</h3>
                <ul class="list">
                    <li>Enterprise: point document root to /public; uses .htaccess</li>
                    <li>OpenLiteSpeed: enable Rewrite and auto-load .htaccess in Virtual Host</li>
                </ul>
                <h3>SSL &amp; Security</h3>
                <pre class="code">sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d example.com</pre>
                <h3>Subdomains for Admin &amp; Storefront</h3>
                <ul class="list">
                    <li>Point both <span class="mark">example.com</span> (storefront) and <span
                            class="mark">admin.example.com</span> (Admin Panel) to the same /public.</li>
                    <li>Ensure <span class="mark">APP_URL</span> matches the primary domain; use <span
                            class="mark">SESSION_DOMAIN=.example.com</span> when sharing sessions across subdomains.
                    </li>
                    <li>If using a CDN/proxy (e.g., Cloudflare), set <span class="mark">TRUSTED_PROXIES=*</span> and
                        keep <span class="mark">APP_URL</span> on https.</li>
                </ul>
                <h3>cPanel Alternative (if /public not possible)</h3>
                <ul class="list">
                    <li>Upload project to /public_html/foodlay_core/</li>
                    <li>Move all files from /foodlay_core/public/ to /public_html/</li>
                    <li>Edit public_html/index.php paths:</li>
                </ul>
                <pre class="code">require __DIR__.'/foodlay_core/vendor/autoload.php';
$app = require_once __DIR__.'/foodlay_core/bootstrap/app.php';</pre>
                <h3>Permissions</h3>
                <ul class="list">
                    <li>Ensure writable: /storage, /bootstrap/cache, .env</li>
                </ul>
                <pre class="code">sudo chown -R www-data:www-data /var/www/foodlay
find /var/www/foodlay -type f -exec chmod 644 {} \;
find /var/www/foodlay -type d -exec chmod 755 {} \;</pre>
                <h3>Cron Job</h3>
                <pre class="code">* * * * * php /path/to/artisan schedule:run >> /dev/null 2>&1</pre>
                <h3>Queue Workers</h3>
                <ul class="list">
                    <li>Use Supervisor/systemd when QUEUE_CONNECTION=database</li>
                </ul>
                <pre class="code"># /etc/supervisor/conf.d/foodlay-worker.conf
[program:foodlay-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/foodlay/artisan queue:work --sleep=1 --tries=3 --max-time=3600
autostart=true
autorestart=true
numprocs=2
redirect_stderr=true
stdout_logfile=/var/log/supervisor/foodlay-worker.log</pre>
                <h3>CORS (API on another domain)</h3>
                <ul class="list">
                    <li>If the mobile apps call this API from a different domain, configure <span
                            class="mark">config/cors.php</span> accordingly.</li>
                </ul>
                <pre class="code">'paths' =&gt; ['api/*', 'sanctum/csrf-cookie'],
'allowed_origins' =&gt; ['https://app.example.com', 'https://admin.example.com'],
'allowed_methods' =&gt; ['*'],
'allowed_headers' =&gt; ['*'],
'supports_credentials' =&gt; true,</pre>
            </div>

            <h2 id="deployment">Deployment</h2>
            <div class="section">
                <h3>First-Time Deployment</h3>
                <ul class="list">
                    <li>Point domain/subdomain document root to /public</li>
                    <li>Upload project files to server</li>
                    <li>Ensure writable: /storage, /bootstrap/cache, .env</li>
                    <li>Create database and user, grant privileges</li>
                    <li>Install PHP dependencies with production flags</li>
                    <li>Generate APP_KEY and link storage</li>
                    <li>Install Node dependencies and build assets</li>
                    <li>Run migrations (and seeders if needed)</li>
                    <li>Cache configuration and routes</li>
                </ul>
                <pre class="code highlight">composer install --no-dev --optimize-autoloader
php artisan key:generate
php artisan storage:link
npm ci
npm run build
php artisan migrate --force
php artisan config:cache
php artisan route:cache
php artisan view:cache</pre>


                <h3>Postâ€‘Deployment Checklist</h3>
                <ul class="list">
                    <li>Visit / to ensure pages load and assets resolve</li>
                    <li>Check APP_URL correctness and HTTPS redirects</li>
                    <li>Verify public/build is present and Vite manifest loads</li>
                    <li>Run health checks: DB connection, cache, queue</li>
                    <li>Confirm storage symlink works (image uploads)</li>
                </ul>

                <h3>Backups &amp; Rollback</h3>
                <ul class="list">
                    <li>Backup database and .env before upgrades</li>
                    <li>Keep previous release for quick rollback</li>
                    <li>Restore DB from dump if migrations fail and rollback is required</li>
                </ul>

                <h3>cPanel Shared Hosting</h3>
                <ul class="list">
                    <li>If document root cannot point to /public, move public files to public_html and adjust index.php
                        paths</li>
                    <li>Run composer in terminal or deploy vendor from local</li>
                    <li>Build assets locally and upload public/build</li>
                </ul>
            </div>

            <h2 id="troubleshooting">Troubleshooting</h2>
            <div class="section">
                <h3>500 Server Error</h3>
                <ul class="list">
                    <li>Check storage/logs/laravel.log</li>
                    <li>Fix permissions:</li>
                </ul>
                <pre class="code">chmod -R 775 storage
chmod -R 775 bootstrap/cache</pre>
                <h3>Vite manifest not found</h3>
                <ul class="list">
                    <li>Ensure public/build exists and was uploaded correctly</li>
                </ul>
                <h3>Images not loading</h3>
                <ul class="list">
                    <li>Link storage:</li>
                </ul>
                <pre class="code highlight">php artisan storage:link</pre>
                <h3>404 Not Found (except homepage)</h3>
                <ul class="list">
                    <li>Nginx: include try_files $uri $uri/ /index.php?$query_string;</li>
                    <li>Apache: ensure .htaccess exists and mod_rewrite is enabled</li>
                </ul>
                <h3>Emails not sending</h3>
                <ul class="list">
                    <li>Verify SMTP config; test connection</li>
                    <li>Use QUEUE_CONNECTION=sync for testing or run workers</li>
                </ul>
                <h3>Class/Target not found</h3>
                <pre class="code highlight">composer dump-autoload
php artisan optimize:clear</pre>
                <h3>Changes not reflecting</h3>
                <pre class="code highlight">php artisan optimize:clear
php artisan config:clear
php artisan cache:clear</pre>
                <h3>419 Page Expired (CSRF)</h3>
                <ul class="list">
                    <li>Check SESSION_DOMAIN; ensure sessions path is writable; set SESSION_SECURE_COOKIE when HTTPS
                    </li>
                </ul>
                <h3>Mixed Content (HTTP/HTTPS)</h3>
                <pre class="code highlight">APP_URL=https://yourdomain.com</pre>
                <h3>Composer platform issues</h3>
                <pre class="code highlight">composer install --ignore-platform-reqs</pre>
                <h3>SQL strict mode errors</h3>
                <ul class="list">
                    <li>Set 'strict' => false in config/database.php and clear config cache</li>
                </ul>
                <h3>Large file uploads fail</h3>
                <pre class="code">upload_max_filesize = 64M
post_max_size = 64M
memory_limit = 512M</pre>
                <h3>Node/Vue build issues</h3>
                <pre class="code highlight">rm -rf node_modules package-lock.json
npm install --legacy-peer-deps
export NODE_OPTIONS=--max_old_space_size=4096
npm run build</pre>
            </div>

            <h2 id="customization">Customization</h2>
            <div class="section">
                <h3>Controllers &amp; Services</h3>
                <ul class="list">
                    <li>Controllers in app/Http/Controllers handle requests</li>
                    <li>Services in app/Services encapsulate business logic</li>
                </ul>
                <h3>Models</h3>
                <ul class="list">
                    <li>Use migrations for schema changes; update model $fillable</li>
                </ul>
                <pre class="code">php artisan make:migration add_column_to_items_table</pre>
                <h3>Frontend (Vue 3 + Inertia)</h3>
                <ul class="list">
                    <li>Pages in resources/js/Pages</li>
                    <li>Components in resources/js/Components</li>
                    <li>Run npm run dev for HMR; npm run build for production</li>
                </ul>
                <h3>Styling &amp; Themes</h3>
                <ul class="list">
                    <li>Tailwind CSS entries in resources/css</li>
                    <li>Rebuild assets after changes</li>
                </ul>
                <h3>Translations</h3>
                <ul class="list">
                    <li>Manage languages via Admin Panel; developer seeds in database/seeders</li>
                </ul>
                <h3>Email Templates</h3>
                <ul class="list">
                    <li>Blade templates at resources/views/emails</li>
                </ul>
                <h3>Routes</h3>
                <pre class="code">Route::get('/', fn () =&gt; Inertia::render('StoreFront/Home'));
Route::get('/admin', fn () =&gt; Inertia::render('AdminPanel/Dashboard'));</pre>
            </div>

            <div>Included: feature questions, bug assistance, help with bundled assets</div>
            <div>Not included: customization services, installation, hosting/server issues</div>
            </div>
            <h3>Before Contacting</h3>
            <ul class="list">
                <li>Read this documentation thoroughly</li>
                <li>Check Troubleshooting section</li>
                <li>Search marketplace comments for similar issues</li>
            </ul>
            </div>
        </section>
    </main>

    <footer class="footer container">
        <div>Â© 2026 Foodlay â€” Admin &amp; Web documentation. Need help? See Home &gt; Help &amp; Support.</div>
    </footer>
    <script src="../assets/js/docs.js"></script>
</body>

</html>