<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Foodlay Customer App Documentation</title>
  <link rel="stylesheet" href="../assets/css/docs.css">
</head>

<body>
  <header class="navbar">
    <div class="nav-inner container">
      <a class="brand" href="../../index.html">
        <div class="logo"></div>
        <div class="title">Foodlay</div>
      </a>
      <nav class="nav-links">
        <a href="../../index.html">Home</a>
        <a href="./admin-and-web.html">Admin &amp; Web</a>
        <a href="./customer-app.html">Customer App</a>
        <a href="./deliveryman-app.html">Deliveryman App</a>
      </nav>
      <div class="nav-actions">
        <button class="btn" id="menu-toggle">Menu</button>
        <button class="btn" id="theme-toggle"><span id="theme-icon">üåô</span> Theme</button>
      </div>
    </div>
  </header>

  <main class="container layout">
    <aside class="sidebar">
      <div class="search">
        <input type="text" id="search" placeholder="Search headings">
        <span class="kbd">/</span>
      </div>
      <h4>Contents</h4>
      <nav class="toc" id="toc">
        <a href="#overview">Overview</a>
        <a href="#requirements">Requirements</a>
        <a href="#environment-setup">Environment Setup</a>
        <a href="#mandatory-setup">Mandatory Setup</a>
        <a href="#quick-start">Quick Start</a>
        <a href="#android-ios-config">Android &amp; iOS Config</a>
        <a href="#localization-rtl">Localization &amp; RTL</a>
        <a href="#theme-branding">Theme &amp; Branding</a>
        <a href="#features">Core Features</a>
        <a href="#architecture">Architecture</a>
        <a href="#routes">Routes</a>
        <a href="#structure">Project Structure</a>
        <a href="#run">Run and Debug</a>
        <a href="#build">Build and Release</a>
        <a href="#signing-release">Signing &amp; Release</a>
        <a href="#api">API Usage</a>
        <a href="#testing">Testing</a>
        <a href="#troubleshooting">Troubleshooting</a>
        <a href="#links">Links</a>
      </nav>
    </aside>

    <section class="content">
      <h2 id="overview">Overview</h2>
      <div class="section">
        <p><strong>Foodlay Customer App</strong> is a complete, production-ready food ordering application built with
          Flutter for Android and iOS.</p>
        <ul class="list">
          <li>A full customer app with authentication, ordering, and tracking</li>
          <li>GoRouter-based navigation with bottom tab dashboard</li>
          <li>Localization, theming, and DI built-in</li>
          <li>Google Maps, Firebase Messaging/Analytics/Crashlytics</li>
        </ul>
        <h3>Basic Usage</h3>
        <ul class="list">
          <li>Launch the app and sign in</li>
          <li>Choose location, browse restaurants, open a page</li>
          <li>Add items to cart, review quantities, checkout</li>
          <li>Select address &amp; payment, confirm order</li>
          <li>Track order status until delivery completes</li>
        </ul>
      </div>

      <h2 id="requirements">Requirements</h2>
      <div class="section">
        <ul class="list">
          <li>Flutter (Channel stable, 3.41.2)</li>
          <li>Android Studio</li>
          <li>Xcode 26.2 for IPA file build</li>
          <li>Devices or emulators</li>
        </ul>
      </div>

      <h2 id="environment-setup">Environment Setup</h2>
      <div class="section">
        <h3>Windows</h3>
        <ul class="list">
          <li>Download Android Studio Koala 2024.1.2 (bundled JDK 17).</li>
          <li>Ensure JDK 17 is used for Android builds.</li>
          <li>Run the installer (e.g., android-studio-ide-&lt;version&gt;-windows.exe).</li>
          <li>Follow the installation wizard; choose a custom location if needed.</li>
          <li>Select components (Android Studio, Android Virtual Device, etc.).</li>
          <li>Launch Android Studio and complete initial setup.</li>
          <li>Install SDK components when prompted.</li>
          <li>Optional: create an emulator in AVD Manager.</li>
        </ul>
        <h3>Install Flutter SDK (Windows)</h3>
        <ul class="list">
          <li>Download the latest stable Flutter for Windows.</li>
          <li>Extract to a folder, e.g., C:\flutter.</li>
          <li>Add C:\flutter\bin to PATH:</li>
          <li>Right‚Äëclick ‚ÄúThis PC‚Äù ‚Üí Properties ‚Üí Advanced system settings ‚Üí Environment Variables.</li>
          <li>Edit ‚ÄúPath‚Äù under System variables ‚Üí New ‚Üí add C:\flutter\bin.</li>
        </ul>
        <ul class="list">
          <li>In Android Studio: File ‚Üí Settings ‚Üí Plugins ‚Üí Marketplace ‚Üí install Flutter and Dart, then restart.</li>
        </ul>
        <pre class="code">flutter doctor</pre>
        <h3>Linux</h3>
        <ul class="list">
          <li>Download Android Studio Koala 2024.1.2 (bundled JDK 17) for Linux.</li>
          <li>Ensure JDK 17 is used for Android builds.</li>
          <li>Extract the archive, move to a preferred location, run setup:</li>
          <li>Install Android Studio: download, extract, move to preferred location, run setup.</li>
        </ul>
        <pre class="code">tar -xvzf android-studio-ide-&lt;version&gt;-linux.tar.gz
sudo mv android-studio /YOUR_DIRECTORY
cd /YOUR_DIRECTORY/android-studio/bin
./studio.sh</pre>
        <ul class="list">
          <li>Install Flutter SDK (Linux): download stable, extract, move to a preferred location, add flutter/bin to
            PATH.</li>
          <li>Install Flutter SDK (Linux): download stable, extract, move to preferred location, add flutter/bin to
            PATH.</li>
        </ul>
        <pre class="code">tar xf flutter_linux_&lt;version&gt;.tar.xz
sudo mv flutter /YOUR_DIRECTORY
flutter doctor</pre>
        <ul class="list">
          <li>Install Flutter and Dart plugins in Android Studio (Settings ‚Üí Plugins ‚Üí Marketplace), then restart.</li>
        </ul>
        <h3>macOS</h3>
        <ul class="list">
          <li>Download Android Studio for macOS (Koala 2024.1.2 with JDK 17).</li>
          <li>Ensure JDK 17 is used for Android builds.</li>
          <li>Open the DMG and drag Android Studio to Applications.</li>
          <li>Launch Android Studio; complete setup and install SDK components.</li>
          <li>Install Flutter SDK (macOS): download stable, extract, move to preferred location, add flutter/bin to
            PATH.</li>
        </ul>
        <pre class="code">tar xf flutter_macos_&lt;version&gt;.tar.xz
flutter doctor</pre>
        <ul class="list">
          <li>In Android Studio: Preferences ‚Üí Plugins ‚Üí Marketplace ‚Üí install Flutter and Dart, then restart.</li>
        </ul>

        <h2 id="mandatory-setup">Mandatory Setup</h2>
        <div class="section">
          <h3>Run an existing Flutter project on IDE</h3>
          <ul class="list">
            <li>Verify Flutter and IDE setup in a terminal:</li>
          </ul>
          <pre class="code">flutter doctor</pre>
          <ul class="list">
            <li>Open the project in Android Studio or VS Code.</li>
            <li>If dependencies are not prompted, fetch them manually:</li>
          </ul>
          <pre class="code">flutter pub get</pre>
          <ul class="list">
            <li>Run the app from IDE or terminal:</li>
          </ul>
          <pre class="code">flutter run</pre>
          <h3>Change App Logo &amp; Icon</h3>
          <h4>App Logo</h4>
          <ul class="list">
            <li>Go to &lt;project&gt;/assets/images/ and replace logo.png with your logo.</li>
            <li>Use the exact file name logo.png.</li>
          </ul>
          <h4>App Icon</h4>
          <ul class="list">
            <li>Generate icons using your preferred app icon generator.</li>
            <li>Android: replace android/app/src/main/res/mipmap-* with the generated icons.</li>
            <li>iOS: replace ios/Runner/Assets.xcassets with the generated Assets.xcassets.</li>
          </ul>
          <h3>Change App Name</h3>
          <ul class="list">
            <li>Update the application name in your constants file:</li>
          </ul>
          <pre class="code">lib/config/util/app_constants.dart
static const String appName = 'YOUR_APP_NAME';</pre>
          <ul class="list">
            <li>Android: set the label in AndroidManifest.xml:</li>
          </ul>
          <pre class="code">android/app/src/main/AndroidManifest.xml
android:label="YOUR_APP_NAME"</pre>
          <ul class="list">
            <li>iOS: set display name and bundle name in Info.plist:</li>
          </ul>
          <pre class="code">ios/Runner/Info.plist
&lt;key&gt;CFBundleDisplayName&lt;/key&gt;
&lt;string&gt;YOUR_APP_NAME&lt;/string&gt;
&lt;key&gt;CFBundleName&lt;/key&gt;
&lt;string&gt;YOUR_APP_NAME&lt;/string&gt;</pre>
          <h3>Change Base URL</h3>
          <ul class="list">
            <li>Install and set up your Admin Panel first.</li>
            <li>If admin login is https://your_domain.com/admin/auth/login then base URL is https://your_domain.com</li>
            <li>Open &lt;project&gt;/lib/util/app_constrants.dart and set baseUrl.</li>
            <li>Do not add a trailing slash.</li>
          </ul>
          <pre class="code">Wrong:
static const String baseUrl = 'https://your_domain.com/';

Right:
static const String baseUrl = 'https://your_domain.com';</pre>
          <h3>Change App Package</h3>
          <ul class="list">
            <li>Find current package in android/app/src/main/AndroidManifest.xml.</li>
            <li>In Android Studio: right‚Äëclick project ‚Üí Replace in Path.</li>
            <li>Enter old package as search, new package as replacement ‚Üí Replace All.</li>
          </ul>
          <h3>Setup Firebase for Push Notification</h3>
          <div class="alert alert-warning">Use one Firebase project for all apps (Customer, Deliveryman, Admin). Add
            multiple apps under the same project.</div>
          <h4>Prerequisites</h4>
          <ul class="list">
            <li>Change your package name/bundle ID first.</li>
            <li>Create a Firebase project at <a href="https://console.firebase.google.com" target="_blank"
                rel="noopener">console.firebase.google.com</a>.</li>
          </ul>
          <h4>Install packages &amp; configure</h4>
          <ul class="list">
            <li>Add Firebase packages and run the FlutterFire CLI to generate lib/firebase_options.dart</li>
          </ul>
          <pre class="code">dart pub add firebase_core firebase_messaging
dart pub global activate flutterfire_cli
firebase login
flutterfire configure</pre>
          <h4>Android</h4>
          <ul class="list">
            <li>Register your Android app in Firebase using the exact applicationId (package name) from
              android/app/build.gradle.</li>
            <li>Add SHA‚Äë1 and SHA‚Äë256 fingerprints (from Gradle signing report or Play Console) for reliable delivery.
            </li>
            <li>Download google-services.json and place it at android/app/google-services.json (replace if exists).</li>
            <li>Ensure the Google Services Gradle plugin is applied in android/app/build.gradle.</li>
            <li>Create a solid white notification icon named notification_icon.png under
              android/app/src/main/res/drawable/.</li>
            <li>Targeting Android 13+: request POST_NOTIFICATIONS permission at runtime in your app code.</li>
          </ul>
          <h4>iOS</h4>
          <ul class="list">
            <li>Register your iOS app in the same Firebase project with your Bundle Identifier.</li>
            <li>Download GoogleService-Info.plist and add it to ios/Runner (ensure it is included in the Runner target
              in Xcode).</li>
            <li>Enable Push Notifications and Background Modes ‚Üí Remote notifications under Signing &amp; Capabilities.
            </li>
            <li>In Apple Developer, create an APNs Auth Key (.p8), then upload Key ID and Team ID to Firebase &rarr;
              Project Settings &rarr; Cloud Messaging.</li>
            <li>On iOS, notifications require user permission; request it at app startup.</li>
          </ul>
          <h4>Request permission &amp; get token</h4>
          <ul class="list">
            <li>Request permission (iOS) and retrieve the device FCM token to test delivery.</li>
          </ul>
          <pre class="code">final settings = await FirebaseMessaging.instance.requestPermission(
  alert: true, badge: true, sound: true,
);
final token = await FirebaseMessaging.instance.getToken();
print('FCM token: $token');</pre>
          <h4>Send a test notification</h4>
          <ul class="list">
            <li>Build and run on a real device.</li>
            <li>Open Firebase &rarr; Cloud Messaging &rarr; Send test message to the device token.</li>
            <li>Android requires Google Play services; iOS requires a real device (simulator cannot receive push).</li>
          </ul>
          <h4>Troubleshooting</h4>
          <ul class="list">
            <li>Token is null (iOS): verify APNs key uploaded, Push/Background modes enabled, run on a real device.</li>
            <li>Missing google-services.json: ensure file path is android/app/google-services.json.</li>
            <li>No notification on Android 13+: request POST_NOTIFICATIONS permission at runtime.</li>
            <li>Stuck delivery: reinstall the app after configuration changes and restart the IDE.</li>
          </ul>
          <h3>Android Secrets</h3>
          <ul class="list">
            <li>Create android/app/src/main/res/values/secrets.xml with required keys.</li>
            <li>Keys: google_maps_api_key, facebook_app_id, facebook_client_token</li>
          </ul>
          <pre class="code">&lt;resources&gt;
  &lt;string name="google_maps_api_key"&gt;YOUR_KEY&lt;/string&gt;
  &lt;string name="facebook_app_id"&gt;YOUR_APP_ID&lt;/string&gt;
  &lt;string name="facebook_client_token"&gt;YOUR_TOKEN&lt;/string&gt;
&lt;/resources&gt;</pre>
          <div class="alert alert-info">After setup, restart your IDE, uninstall any previously installed app, and test
            on a real device (emulators/simulators do not receive push on iOS).</div>
          <h3>Add Google Map API Key</h3>
          <ul class="list">
          </ul>
          <div class="alert alert-warning">If your map key was created before March 1, 2025, enable Routes API and
            Places API (New).</div>
          <h4>Android</h4>
          <pre
            class="code">&lt;meta-data android:name="com.google.android.geo.API_KEY" android:value="YOUR_MAP_API_KEY_HERE"/&gt;</pre>
          <h4>iOS</h4>
          <pre class="code">GMSServices.provideAPIKey("YOUR_MAP_API_KEY_HERE")</pre>
          <h4>Web</h4>
          <pre
            class="code">&lt;script src="https://maps.googleapis.com/maps/api/js?key=YOUR_MAP_API_KEY_HERE"&gt;&lt;/script&gt;</pre>

          <h2 id="quick-start">Quick Start</h2>
          <div class="section">
            <h3>Pick a device</h3>
            <ul class="list">
              <li>Android: start an emulator from AVD Manager or connect a device with USB debugging enabled.</li>
              <li>iOS: open Simulator from Xcode (or connect a real device with Developer Mode enabled).</li>
            </ul>
            <h3>Run from IDE</h3>
            <ul class="list">
              <li>Open the project in <span class="mark">Android Studio</span> or <span class="mark">VS Code</span>.
              </li>
              <li>Select a target device from the device dropdown.</li>
              <li>Click Run ‚ñ∂ to build and launch in debug mode.</li>
            </ul>
            <h3>Run from terminal</h3>
            <pre class="code">flutter pub get
flutter run</pre>
            <h3>Common checks</h3>
            <ul class="list">
              <li>Accept Android SDK licenses if prompted.</li>
            </ul>
            <pre class="code">flutter doctor --android-licenses</pre>
            <ul class="list">
              <li>Verify a device is available.</li>
            </ul>
            <pre class="code">flutter devices</pre>
            <img src="../assets/images/upload/open-project.png" alt="Open project" class="doc-img">
            <img src="../assets/images/upload/emulator-connection.png" alt="Emulator connection" class="doc-img">
            <img src="../assets/images/upload/run-completed.png" alt="Run completed" class="doc-img">
          </div>

          <!-- Configuration section merged into Mandatory Setup; removed to avoid duplication -->

          <h2 id="android-ios-config">Android &amp; iOS Config</h2>
          <div class="section">
            <h3>Android</h3>
            <ul class="list">
              <li>App ID: set applicationId under defaultConfig in android/app/build.gradle.</li>
              <li>App name: set android:label in android/app/src/main/AndroidManifest.xml.</li>
              <li>SDK levels: set minSdkVersion and targetSdkVersion in build.gradle.</li>
              <li>Signing: create a keystore, add key.properties, and reference it in the release signingConfig.</li>
              <li>Release build: flutter build apk or flutter build appbundle.</li>
            </ul>
            <h3>iOS</h3>
            <ul class="list">
              <li>Open ios/Runner.xcworkspace in Xcode.</li>
              <li>Bundle Identifier: set under General; select Team to enable automatic signing.</li>
              <li>Deployment Target: choose a supported iOS version.</li>
              <li>Capabilities: enable Push Notifications and Background Modes if using FCM.</li>
              <li>Release build: flutter build ipa or archive via Xcode Product ‚Üí Archive.</li>
            </ul>
            <img src="../assets/images/upload/application-name.png" alt="Application name" class="doc-img">
            <img src="../assets/images/upload/application-id-2.png" alt="Application ID" class="doc-img">
            <img src="../assets/images/upload/ios-config-1.png" alt="iOS config 1" class="doc-img">
            <img src="../assets/images/upload/ios-config-2.png" alt="iOS config 2" class="doc-img">
          </div>

          <h2 id="localization-rtl">Localization &amp; RTL</h2>
          <div class="section">
            <h3>Add New Language</h3>
            <ul class="list">
              <li>Create a new ARB file under lib/l10n/arb, for example: lib/l10n/arb/app_es.arb</li>
              <li>Copy all keys from app_en.arb into your new file.</li>
              <li>Translate values after the colon only; keep keys and placeholders unchanged.</li>
              <li>Use valid ISO language codes (ISO‚Äë639) and country codes (ISO‚Äë3166) when needed. Reference: <a
                  href="https://docs.oracle.com/cd/E13214_01/wli/docs92/xref/xqisocodes.html" target="_blank"
                  rel="noopener">ISO codes list</a></li>
            </ul>
            <pre class="code">lib/l10n/arb/app_es.arb
{
  "@@locale": "es",
  "office": "Oficina",
  "welcome": "Bienvenido"
}</pre>
            <ul class="list">
              <li>Generate localizations (or hot‚Äërestart if your IDE runs gen‚Äël10n automatically):</li>
            </ul>
            <pre class="code">flutter gen-l10n</pre>
            <ul class="list">
              <li>Ensure the locale is included in supportedLocales. If you use AppLocalizations.supportedLocales, this
                is automatic.</li>
            </ul>
            <pre class="code">MaterialApp(
  supportedLocales: AppLocalizations.supportedLocales,
  // Or explicitly:
  // supportedLocales: const [Locale('en'), Locale('es')],
)</pre>
            <h3>Remove Existing Language</h3>
            <ul class="list">
              <li>Delete the ARB file for the language from lib/l10n/arb.</li>
              <li>Regenerate localizations: flutter gen-l10n</li>
              <li>If locales are manually listed, remove the Locale entry from supportedLocales.</li>
            </ul>
            <h3>Make Default Language</h3>
            <ul class="list">
              <li>Set a fixed default by specifying locale on your MaterialApp:</li>
            </ul>
            <pre class="code">MaterialApp(
  locale: const Locale('es'),
)</pre>
            <ul class="list">
              <li>Or rely on device language by omitting locale and keeping supportedLocales up to date.</li>
            </ul>
            <h3>RTL Support</h3>
            <ul class="list">
              <li>RTL locales (e.g., ar) are supported automatically by Flutter‚Äôs Directionality and localization
                system.</li>
              <li>Use directional widgets and avoid hard‚Äëcoding text directions in custom layouts.</li>
            </ul>
          </div>

          <h2 id="theme-branding">Theme &amp; Branding</h2>
          <div class="section">
            <h3>Change App Color</h3>
            <ul class="list">
              <li>Open &lt;project&gt;/lib/theme/light_theme.dart and set primaryColor, foregroundColor, secondary, etc.
              </li>
              <li>Open &lt;project&gt;/lib/theme/dark_theme.dart and mirror the same updates for dark mode.</li>
              <li>Keep contrast and accessibility in mind for text and icons.</li>
            </ul>
            <h3>Change App Font</h3>
            <ul class="list">
              <li>Download a font family you like. See free options at <a href="https://fonts.google.com/"
                  target="_blank" rel="noopener">Google Fonts</a>.</li>
              <li>Unzip and copy TTF/OTF files to &lt;project&gt;/assets/font/</li>
              <li>Declare the font in pubspec.yaml under flutter ‚Üí fonts.</li>
            </ul>
            <pre class="code">flutter:
  fonts:
    - family: YOUR_FONT_FAMILY_NAME
      fonts:
        - asset: assets/font/YOUR_FONT_FILE_NAME.ttf
          weight: YOUR_FONT_WEIGHT</pre>
            <ul class="list">
              <li>Set the font family in &lt;project&gt;/lib/util/app_constants.dart</li>
            </ul>
            <pre class="code">static const String fontFamily = 'YOUR_FONT_FAMILY_NAME';</pre>
            <h3>Change Notification Sound</h3>
            <ul class="list">
              <li>Android: replace &lt;project&gt;/android/app/src/main/res/raw/notification.wav with your file. Keep
                the filename notification.wav</li>
              <li>If there is notification.mp3 or notification.wav under &lt;project&gt;/assets, replace it too and keep
                the filename unchanged.</li>
              <li>Use a short and small audio file to avoid delivery issues.</li>
            </ul>
            <h3>Change Onboarding Text and Graphics</h3>
            <ul class="list">
              <li>Open lib/l10n/arb/app_en.arb. Update values for keys such as "on_boarding_1_title" and
                "on_boarding_1_description". Do not change keys.</li>
            </ul>
            <pre class="code">"on_boarding_1_title": "YOUR_PREFERRED_TITLE",
"on_boarding_1_description": "YOUR_PREFERRED_DESCRIPTION"</pre>
            <ul class="list">
              <li>Repeat for other languages (e.g., app_es.arb) and regenerate: flutter gen-l10n</li>
              <li>Graphics: replace &lt;project&gt;/assets/images/onboard_1.png, onboard_2.png, onboard_3.png with your
                PNGs using the same names.</li>
            </ul>

          </div>



          <h2 id="features">Core Features</h2>
          <div class="section">
            <ul class="list">
              <li>Dashboard tabs: Home, Menu, Cart, Offers, Account</li>
              <li>Onboarding, Splash, Search with filters</li>
              <li>Authentication: password, OTP verification, setup password</li>
              <li>Profile and settings, wishlist</li>
              <li>Address selection and delivery info with Maps</li>
              <li>Checkout and payment (webview-based flows)</li>
              <li>Orders, details, tracking, confirmation</li>
              <li>Wallet, loyalty points, referral</li>
              <li>Notifications (Firebase) and local notifications</li>
              <li>Chat and conversations</li>
              <li>File viewer (images/videos), About/Terms/Privacy/Refund</li>
            </ul>
          </div>

          <h2 id="architecture">Architecture</h2>
          <div class="section">
            <ul class="list">
              <li>Routing with GoRouter and custom transitions</li>
              <li>State with Bloc/HydratedBloc; DI via get_it + injectable</li>
              <li>ThemeLocalizationWrapper and GlobalOverlayWrapper</li>
              <li>Firebase initialized in main with NotificationHelper</li>
              <li>Error handling via Catcher2 (debug/release configs)</li>
            </ul>
          </div>

          <h2 id="routes">Routes</h2>
          <div class="section">
            <ul class="list">
              <li>Shell: Dashboard</li>
              <li>Home: /home</li>
              <li>Menu: /menu</li>
              <li>Cart: /cart</li>
              <li>Offers: /offers?tab=0..n</li>
              <li>Account: /account</li>
              <li>Splash: /splash</li>
              <li>Onboarding: /onboarding_screen</li>
              <li>Search Result: /search_result?filters=&amp;query=</li>
              <li>Login: /login</li>
              <li>Forget Password Login: /forget_login</li>
              <li>Set Up Password: /set_up_password?uniqueIdentifier=&amp;otp=</li>
              <li>Verification: /verification?uniqueIdentifier=&amp;isFromOtp=</li>
              <li>Edit Profile: /edit_profile</li>
              <li>Contact Us: /contact_us</li>
              <li>Terms &amp; Condition: /terms_and_condition</li>
              <li>Privacy Policy: /privacy_policy</li>
              <li>Refund Policy: /refund_policy</li>
              <li>FAQ: /faq</li>
              <li>Settings: /settings</li>
              <li>Settings ‚Üí Setup Password: /settings/settings_setup_password?isUpdated=</li>
              <li>Notification: /notification</li>
              <li>Wishlist: /wishlist</li>
              <li>Wallet: /wallet</li>
              <li>Loyalty Point: /loyalty_point</li>
              <li>Referral: /referral</li>
              <li>Checkout: /checkout</li>
              <li>Checkout ‚Üí Update Delivery Info: /checkout/update_delivery_info</li>
              <li>Checkout ‚Üí Address: /checkout/checkout_address?address=&amp;showDeliveryArea=</li>
              <li>Checkout ‚Üí Personal Info: /checkout/personal_info</li>
              <li>Payment: /payment?amount=</li>
              <li>My Orders: /my_orders</li>
              <li>My Orders ‚Üí Details: /my_orders/order_details?data=&amp;orderId=&amp;isTrack=</li>
              <li>Order Confirmation: /order_confirmation?orderId=&amp;readableId=&amp;phone=&amp;countryDialCode=
              </li>
              <li>Chat: /chat</li>
              <li>Chat ‚Üí Conversation: /chat/conversation?chatName=&amp;chatId=&amp;imageUrl=&amp;isBusiness=</li>
              <li>File Viewer: /file_viewer?data=&amp;initialIndex=</li>
              <li>About Us: /about_us</li>
              <li>Select Location: /select_location</li>
              <li>Recommended View All: /recommended_view_all</li>
              <li>WebView: /webview?data=</li>
            </ul>
          </div>

          <h2 id="structure">Project Structure</h2>
          <div class="section">
            <ul class="list">
              <li>lib/config/route: route_config.dart</li>
              <li>lib/config/theme: light_theme.dart, dark_theme.dart, custom_theme_colors.dart</li>
              <li>lib/config/util: assets.gen.dart, fonts.gen.dart, styles.dart, constants</li>
              <li>lib/core: helpers, DI, notifications, overlays</li>
              <li>lib/features: screens for home, menu, cart, checkout, orders, etc.</li>
              <li>lib/l10n/arb: app_en.arb, app_ar.arb, app_bn.arb, app_es.arb, app_hi.arb</li>
            </ul>
          </div>

          <h2 id="run">Run and Debug</h2>
          <div class="section">
            <h3>From IDE</h3>
            <ul class="list">
              <li>Open the project in <span class="mark">Android Studio</span> or <span class="mark">VS Code</span>.
              </li>
              <li>Select a device (emulator/simulator/USB) from the device picker.</li>
              <li>Click Run ‚ñ∂ to start in debug mode. Use hot reload to see UI changes instantly.</li>
              <li>Set breakpoints in Dart files and inspect Variables, Call Stack, and Watch.</li>
              <li>Open Flutter DevTools from the IDE for Performance, Memory, and Logs.</li>
            </ul>
            <h3>From terminal</h3>
            <pre class="code">flutter pub get
flutter devices
flutter run</pre>
            <ul class="list">
              <li>Hot reload: press <span class="mark">r</span>. Hot restart: <span class="mark">R</span>. Quit: <span
                  class="mark">q</span>.</li>
              <li>Pick a specific device: run <span class="mark">flutter devices</span> then <span class="mark">flutter
                  run -d &lt;deviceId&gt;</span>.</li>
              <li>Attach to a running app (e.g., started from IDE):</li>
            </ul>
            <pre class="code">flutter attach</pre>
            <h3>Logging</h3>
            <ul class="list">
              <li>View framework/app logs:</li>
            </ul>
            <pre class="code">flutter logs</pre>
            <ul class="list">
              <li>Android (advanced):</li>
            </ul>
            <pre class="code">adb logcat | grep -i your.package.name</pre>
            <ul class="list">
              <li>iOS Simulator (advanced):</li>
            </ul>
            <pre class="code">xcrun simctl spawn booted log stream --predicate 'process == "Runner"'</pre>
            <h3>Profile performance</h3>
            <ul class="list">
              <li>Run with instrumentation and open DevTools &rarr; Performance/CPU profiler:</li>
            </ul>
            <pre class="code">flutter run --profile</pre>
            <h3>Clean &amp; rebuild</h3>
            <ul class="list">
              <li>If you see odd build or dependency errors, clean and rebuild:</li>
            </ul>
            <pre class="code">flutter clean
flutter pub get</pre>
            <div class="alert alert-info">For push notifications and certain device features, use a real device. iOS
              simulators cannot receive APNs push.</div>
          </div>

          <h2 id="build">Build and Release</h2>
          <div class="section">
            <h3>Android</h3>
            <ul class="list">
              <li>Ensure release signing is configured. See Signing &amp; Release section.</li>
              <li>Release APK (quick test on device):</li>
            </ul>
            <pre class="code highlight">flutter build apk --release</pre>
            <ul class="list">
              <li>App Bundle (required for Play Store):</li>
            </ul>
            <pre class="code highlight">flutter build appbundle</pre>
            <ul class="list">
              <li>Split per ABI (smaller APKs for distribution outside Play):</li>
            </ul>
            <pre class="code highlight">flutter build apk --split-per-abi</pre>
            <ul class="list">
              <li>Output paths:</li>
            </ul>
            <pre class="code">build/app/outputs/flutter-apk/app-release.apk
build/app/outputs/bundle/release/app-release.aab</pre>
            <ul class="list">
              <li>Install to a connected device for verification:</li>
            </ul>
            <pre class="code">flutter install -d &lt;deviceId&gt;</pre>
            <ul class="list">
              <li>Update version before release in android/app/build.gradle:</li>
            </ul>
            <pre class="code">defaultConfig {
    versionCode 2
    versionName "1.1.0"
}</pre>
            <h3>iOS</h3>
            <ul class="list">
              <li>Prerequisites: valid Apple Developer account, signing certificates, and provisioning in Xcode.</li>
              <li>Build IPA (signed) from CLI:</li>
            </ul>
            <pre class="code highlight">flutter build ipa</pre>
            <ul class="list">
              <li>Archive and upload via Xcode:</li>
              <li>Open ios/Runner.xcworkspace ‚Üí select a physical device or Any iOS Device (Archive) ‚Üí Product ‚Üí
                Archive.</li>
              <li>In Organizer ‚Üí Distribute App ‚Üí App Store Connect or Ad Hoc as needed.</li>
              <li>Update version and build number in Xcode (General ‚Üí Version, Build) before archiving.</li>
            </ul>
            <ul class="list">
              <li>Output path for CLI build:</li>
            </ul>
            <pre class="code">build/ios/ipa/Runner.ipa</pre>
            <div class="alert alert-info">Tip: Perform a final test on a release build (Android and iOS) to validate
              push notifications, background behavior, and performance before submitting to stores.</div>
          </div>

          <h2 id="signing-release">Signing &amp; Release</h2>
          <div class="section">
            <h3>Android: Keystore &amp; Signing</h3>
            <ul class="list">
              <li>Create a private keystore (keep it safe; do not commit to git):</li>
            </ul>
            <pre class="code">keytool -genkeypair -v -keystore ~/keystores/foodlay-release.keystore \
  -alias foodlay -keyalg RSA -keysize 2048 -validity 36500</pre>
            <ul class="list">
              <li>Create <span class="mark">key.properties</span> in the project root (git‚Äëignored):</li>
            </ul>
            <pre class="code">storePassword=YOUR_STORE_PASSWORD
keyPassword=YOUR_KEY_PASSWORD
keyAlias=foodlay
storeFile=/ABSOLUTE/PATH/TO/foodlay-release.keystore</pre>
            <ul class="list">
              <li>Load and apply signing in <span class="mark">android/app/build.gradle</span>:</li>
            </ul>
            <pre class="code">def keystoreProperties = new Properties()
def keystorePropertiesFile = rootProject.file('key.properties')
if (keystorePropertiesFile.exists()) {
  keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
}

android {
  signingConfigs {
    release {
      storeFile file(keystoreProperties['storeFile'])
      storePassword keystoreProperties['storePassword']
      keyAlias keystoreProperties['keyAlias']
      keyPassword keystoreProperties['keyPassword']
    }
  }
  buildTypes {
    release {
      signingConfig signingConfigs.release
      minifyEnabled true
      shrinkResources true
      proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
    }
  }
}</pre>
            <div class="alert alert-warning"><strong>Security</strong> Never commit your keystore or key.properties.
              Store them in a secure location (password manager or secrets storage).</div>

            <h3>Android: Play Console</h3>
            <ul class="list">
              <li>Use Play App Signing (recommended). Upload your first <span class="mark">.aab</span> to register the
                upload key.</li>
              <li>Complete store listing: app details, screenshots, content rating, privacy policy, and data safety.
              </li>
              <li>Set versionCode/versionName, and test the release build on physical devices before rollout.</li>
            </ul>

            <h3>iOS: Signing &amp; Provisioning</h3>
            <ul class="list">
              <li>Open <span class="mark">ios/Runner.xcworkspace</span> in Xcode. In Runner target ‚Üí Signing &amp;
                Capabilities:</li>
              <li>Select your Team and enable <span class="mark">Automatically manage signing</span>.</li>
              <li>Ensure a valid Bundle Identifier and a Distribution profile for release builds.</li>
              <li>Capabilities as required by the app (e.g., Push Notifications, Background Modes) must be enabled.</li>
            </ul>

            <h3>iOS: Archive &amp; Submit</h3>
            <ul class="list">
              <li>Update Version and Build in Xcode (General tab).</li>
              <li>Product ‚Üí Archive. In Organizer ‚Üí Distribute App ‚Üí App Store Connect ‚Üí Upload.</li>
              <li>Complete App Store Connect metadata, screenshots, and privacy questionnaires.</li>
              <li>Wait for processing, then submit for review.</li>
            </ul>

            <h3>Release Checklist</h3>
            <ul class="list">
              <li>Update app icons, splash, and display name for production.</li>
              <li>Set production API base URLs and disable verbose logging.</li>
              <li>Verify push notifications, deep background behaviors, and performance on release builds.</li>
              <li>Review privacy permissions prompts and descriptions (Android/iOS) match features used.</li>
              <li>Backup your keystore and credentials securely.</li>
            </ul>
          </div>

          <h2 id="api">API Usage</h2>
          <div class="section">
            <h3>Base URL &amp; Environments</h3>
            <ul class="list">
              <li>Define an API base URL and keep separate values for dev, stage, and prod.</li>
              <li>Do not hardcode secrets in code or assets; inject at build time or load securely.</li>
              <li>Pass runtime values when needed:</li>
            </ul>
            <pre class="code">flutter run --dart-define=API_BASE_URL=https://api.example.com</pre>
            <h3>Authentication</h3>
            <ul class="list">
              <li>Use token-based auth with short-lived access token and refresh token.</li>
              <li>Attach Authorization header to protected requests:</li>
            </ul>
            <pre class="code">Authorization: Bearer &lt;ACCESS_TOKEN&gt;</pre>
            <ul class="list">
              <li>Refresh on 401/expired token. Queue pending calls during refresh; logout on refresh error.</li>
              <li>Store refresh tokens in platform-secure storage; keep access token in memory when possible.</li>
            </ul>
            <h3>Common headers</h3>
            <ul class="list">
              <li>Accept: application/json</li>
              <li>Accept-Language: current locale code (e.g., en, es, ar)</li>
              <li>X-App-Version: app version/build for backend diagnostics</li>
            </ul>
            <h3>Pagination &amp; filtering</h3>
            <ul class="list">
              <li>Use page/limit or cursor parameters; maintain hasMore based on response.</li>
              <li>Always debounce search queries and cache recent pages to reduce network load.</li>
            </ul>
            <h3>Error handling</h3>
            <ul class="list">
              <li>Map HTTP codes to user-friendly states: 400 validation, 401 auth, 403 forbidden, 404 not found, 429
                rate limit, 5xx server.</li>
              <li>Show actionable messages and retry options where safe; fall back to cached data when possible.</li>
            </ul>
            <h3>Retry, timeout, and backoff</h3>
            <ul class="list">
              <li>Set sensible connect/read timeouts to avoid hung requests.</li>
              <li>Use exponential backoff with jitter on transient errors (e.g., 429/5xx). Avoid retrying non-idempotent
                POSTs unless supported.</li>
            </ul>
            <h3>Security</h3>
            <ul class="list">
              <li>Always use HTTPS in production; reject plain HTTP.</li>
              <li>Never log tokens or personally identifiable information.</li>
              <li>Persist sensitive values with platform-secure storage APIs.</li>
            </ul>
            <h3>Sample requests (cURL)</h3>
            <ul class="list">
              <li>Login to obtain tokens:</li>
            </ul>
            <pre class="code">curl -X POST https://api.example.com/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"user@example.com","password":"your_password"}'</pre>
            <ul class="list">
              <li>Fetch a paginated list with locale header:</li>
            </ul>
            <pre class="code">curl "https://api.example.com/api/v1/products?page=1&amp;limit=20" \
  -H "Authorization: Bearer &lt;ACCESS_TOKEN&gt;" \
  -H "Accept: application/json" \
  -H "Accept-Language: en"</pre>
          </div>

          <h2 id="testing">Testing</h2>
          <div class="section">
            <h3>Unit &amp; Widget Tests</h3>
            <ul class="list">
              <li>Place tests under the <span class="mark">test/</span> directory and use the <span
                  class="mark">*_test.dart</span> naming convention.</li>
              <li>Run all tests:</li>
            </ul>
            <pre class="code">flutter test</pre>
            <ul class="list">
              <li>Run a single file or filter by name:</li>
            </ul>
            <pre class="code">flutter test test/path/to/widget_test.dart
flutter test --plain-name "renders product card"</pre>
            <ul class="list">
              <li>Increase concurrency to speed up CPU‚Äëbound suites (adjust based on your machine):</li>
            </ul>
            <pre class="code">flutter test --concurrency=4</pre>
            <h3>Integration Tests</h3>
            <ul class="list">
              <li>Create tests under <span class="mark">integration_test/</span>. Start an emulator/simulator or connect
                a device.</li>
              <li>Run all integration tests (picks an available device):</li>
            </ul>
            <pre class="code">flutter test integration_test</pre>
            <ul class="list">
              <li>Run on a specific device (find IDs with <span class="mark">flutter devices</span>):</li>
            </ul>
            <pre class="code">flutter test integration_test -d &lt;deviceId&gt;</pre>
            <h3>Coverage</h3>
            <ul class="list">
              <li>Generate coverage and view an HTML report (install <span class="mark">lcov</span> first):</li>
            </ul>
            <pre class="code">flutter test --coverage
genhtml coverage/lcov.info -o coverage/html
open coverage/html/index.html</pre>
            <h3>Best Practices</h3>
            <ul class="list">
              <li>Keep unit tests pure and deterministic; avoid real network calls.</li>
              <li>Use fakes or dependency injection to isolate business logic from I/O.</li>
              <li>For widgets, prefer golden tests for stable UI states; update goldens intentionally.</li>
            </ul>
          </div>

          <h2 id="troubleshooting">Troubleshooting</h2>
          <div class="section">
            <h3>Quick checks</h3>
            <ul class="list">
              <li>Verify setup:</li>
            </ul>
            <pre class="code">flutter doctor -v</pre>
            <ul class="list">
              <li>Clean caches and re-fetch deps:</li>
            </ul>
            <pre class="code">flutter clean
flutter pub get</pre>
            <h3>Android build issues</h3>
            <ul class="list">
              <li>Gradle/AGP mismatch: update Gradle wrapper and Android Gradle Plugin together.</li>
            </ul>
            <pre class="code">android/gradle/wrapper/gradle-wrapper.properties
distributionUrl=https\://services.gradle.org/distributions/gradle-8.x-all.zip</pre>
            <ul class="list">
              <li>Update AGP in android/build.gradle:</li>
            </ul>
            <pre class="code">classpath "com.android.tools.build:gradle:8.x.y"</pre>
            <ul class="list">
              <li>compileSdk/targetSdk errors: align to supported SDK levels in android/app/build.gradle.</li>
              <li>Activity exported error (Android 12+): set exported on activities with intent filters.</li>
            </ul>
            <pre
              class="code">&lt;activity android:name=".MainActivity" android:exported="true"&gt;...&lt;/activity&gt;</pre>
            <ul class="list">
              <li>INSTALL_FAILED_VERSION_DOWNGRADE or SIGNATURE conflict: uninstall previous app first.</li>
            </ul>
            <pre class="code">adb uninstall your.package.name</pre>
            <ul class="list">
              <li>google-services.json not found: ensure file exists at android/app/google-services.json.</li>
            </ul>
            <h3>iOS build issues</h3>
            <ul class="list">
              <li>CocoaPods errors: install/update pods inside ios/ then re-run build.</li>
            </ul>
            <pre class="code">cd ios
pod repo update
pod install --repo-update</pre>
            <ul class="list">
              <li>Clean DerivedData when Xcode behaves inconsistently:</li>
            </ul>
            <pre class="code">rm -rf ~/Library/Developer/Xcode/DerivedData</pre>
            <ul class="list">
              <li>Deployment target mismatch: align platform in Podfile with Xcode target.</li>
              <li>Signing/profile issues: set Team, Bundle Identifier, and enable required Capabilities.</li>
            </ul>
            <h3>Firebase push</h3>
            <ul class="list">
              <li>No token on iOS: use a real device, enable Push/Background Modes, upload APNs key to Firebase.</li>
              <li>Android 13+ no notifications: request POST_NOTIFICATIONS at runtime.</li>
              <li>After changing configs, uninstall app and reinstall to refresh tokens and permissions.</li>
            </ul>
            <h3>Network &amp; SSL</h3>
            <ul class="list">
              <li>CERTIFICATE_VERIFY_FAILED: use HTTPS endpoints, check device date/time, and avoid self‚Äësigned certs in
                prod.</li>
              <li>Timeouts/intermittent errors: add sensible connect/receive timeouts and retry with backoff for
                idempotent calls.</li>
            </ul>
            <h3>Code generation</h3>
            <ul class="list">
              <li>Generated files missing or stale:</li>
            </ul>
            <pre class="code">flutter pub run build_runner build --delete-conflicting-outputs</pre>
            <h3>Maps</h3>
            <ul class="list">
              <li>Map key missing: add google_maps_api_key to secrets.xml and iOS key via GMSServices.provideAPIKey.
              </li>
            </ul>
          </div>


          <h2 id="links">Links</h2>
          <div class="section">
            <ul class="list">
              <li><a href="https://docs.flutter.dev" target="_blank" rel="noopener">Flutter Docs</a></li>
              <li><a href="https://pub.dev" target="_blank" rel="noopener">pub.dev</a></li>
            </ul>
          </div>
    </section>
  </main>

  <footer class="footer container">
    <div>¬© 2026 Foodlay ‚Äî Customer app documentation. Need help? See Home &gt; Help &amp; Support.</div>
  </footer>
  <script src="../assets/js/docs.js"></script>
</body>

</html>